<html>
    <head>
        <title>$title</title>
        <script src="//cdnjs.cloudflare.com/ajax/libs/list.js/1.5.0/list.min.js"></script>
        <style>
            .pagination li {
                display:inline-block;
                padding:5px;
            }
        </style>
    </head>
    <body>
        <h1>$message</h1>
        <script>
            var current_pattern = "";
            var current_size = 5;
        </script>
        <label for="page_items">Number of banks per page (1-20):</label>
        <input type="number" id="page_items" min="1" max="20" value="5" onchange="resize_page()">
        <input type="text" id="ccfilter" onkeyup="resize_page()" placeholder="Filter by Country Code">
        <div id="listdiv">
            <ul id="banklist" class="list">
                #foreach($bank in $banks)
                <li class="name">$bank.get("bic")
                    <ul>
                    #foreach($val in $bank.values())
                        <li>$val</li>
                    #end
                    </ul>
                </li>
                #end
            </ul>
            <ul class="pagination" id="pager"></ul>
        </div>
        <script>
            new List('listdiv', {
                valueNames: ['name'],
                page: 5,
                pagination: true
            });
            function resize_page() {
                current_size = parseInt(document.getElementById("page_items").value);
                current_pattern = document.getElementById("ccfilter").value.toUpperCase()
                var pager = document.getElementById("pager");
                while (pager.firstChild) {
                    var child = pager.firstChild;
                    pager.removeChild(child);
                }
                var banklist = document.getElementById("banklist");
                while (banklist.firstChild) {
                    var child = banklist.firstChild;
                    banklist.removeChild(child);
                }
                #foreach($bank in $banks)
                    if("$bank.get("countryCode")".includes(current_pattern))
                    {
                        var li = document.createElement("li");
                        li.className="name";
                        li.hidden=false;
                        li.textContent = "$bank.get("bic");"
                        var ul = document.createElement("ul");

                        #foreach($field in $bank.keySet())
                            #if("$field"!= "bic")
                                var li_nested = document.createElement("li");
                                li_nested.hidden=false;
                                li_nested.textContent = "$bank.get("$field")";
                            #end
                            ul.appendChild(li_nested)
                        #end
                        li.appendChild(ul);
                        banklist.appendChild(li);
                    }
                #end
                new List('listdiv', {
                    valueNames: ['name'],
                    page: current_size,
                    pagination: true
                });
            }
        </script>
    </body>
</html>